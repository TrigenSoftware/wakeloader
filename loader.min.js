// wakeloader 0.1 | Copyright (C) 2013 TrigenSoftware | The MIT License (MIT)
!function(){function e(e,a){if(!t(e)){var r=document.createElement("script");r.async=!1,r.src=e,a&&(r.onload=function(){d=!1,(o||i.async&&wakeloader.quick)&&l()}),u.appendChild(r)}}function a(e,a){for(var r in wakeloader.alias)0==e.indexOf(wakeloader.alias[r])&&(e=e.replace(wakeloader.alias[r],r));return-1!=e.indexOf(".css")&&e.length-4==e.indexOf(".css")||!a||(e+=".css"),-1!=e.indexOf(".js")&&e.length-3==e.indexOf(".js")||a||(e+=".js"),"/"!=e[0]&&-1==e.indexOf("://")&&(e="/"+e),e}function r(e,r){var t=[];for(var l in e)if("object"==typeof e[l])for(var o in e[l])for(var d in e[l][o])n.push(a(o+e[l][o][d],r));else t.push(a(e[l],r));return t}function t(e){return document.querySelectorAll('script[src="'+e+'"]').length>0||document.querySelectorAll('script[data-src="'+e+'"]').length>0||u.querySelectorAll('script[src="'+e+'"]').length>0||u.querySelectorAll('script[data-src="'+e+'"]').length>0}function l(){o=!0,wakeloader.main&&!d&&window[wakeloader.main]()}var o=!1,d=!0,u=document.createElement("require"),i=document.querySelectorAll("script[wake-loader]"),n=[];if(1==i.length){if(i=i[0],window.wakeloader||(window.wakeloader={}),wakeloader.main||!i.dataset.main&&""!=i.dataset.main||(wakeloader.main=""==i.dataset.main?"main":i.dataset.main),wakeloader.main||(wakeloader.main=!1),wakeloader.quick||"true"!=i.dataset.quick&&""!=i.dataset.quick||(wakeloader.quick=!0),wakeloader.quick||(wakeloader.quick=!1),wakeloader.cached||"true"!=i.dataset.cached&&""!=i.dataset.cached||(wakeloader.cached=!0),wakeloader.cached||(wakeloader.cached=!1),!wakeloader.update&&i.dataset.update&&(wakeloader.update=i.dataset.update),wakeloader.update||(wakeloader.update="wakeDefault"),localStorage.wakeloaderUpdate||(localStorage.wakeloaderUpdate="wakeDefault"),!wakeloader.queue&&i.innerHTML.trim().length>0)try{wakeloader.queue=JSON.parse(i.innerHTML.trim())}catch(c){wakeloader.queue=!1}if(!wakeloader.queue&&i.dataset.queue)try{wakeloader.queue=JSON.parse(i.dataset.queue)}catch(c){wakeloader.queue=!1}if(wakeloader.cached){if(localStorage.wakeloaderUpdate!=wakeloader.update)localStorage.wakeloaderQueue="",localStorage.wakeloaderUpdate=wakeloader.update;else if(localStorage.wakeloaderQueue){var w=[];try{w=JSON.parse(localStorage.wakeloaderQueue)}catch(c){}if(wakeloader.queue)for(var s in w)wakeloader.queue.push(w[s]);else wakeloader.queue=w}}else localStorage.wakeloaderQueue="";if(wakeloader.queue||(wakeloader.queue=[]),!wakeloader.mainFile&&i.dataset.mainFile&&(wakeloader.mainFile=a(i.dataset.mainFile),wakeloader.queue.push(wakeloader.mainFile)),wakeloader.mainFile||(wakeloader.mainFile=!1),!wakeloader.alias&&i.dataset.alias)try{wakeloader.alias=JSON.parse(i.dataset.alias)}catch(c){wakeloader.alias=!1}wakeloader.alias||(wakeloader.alias={}),window.addEventListener(wakeloader.quick?"DOMContentLoaded":"load",l,!1),window.require=function(e){if(arguments.length>1)for(var l in arguments)window.require(arguments[l]);else if("array"!=typeof e&&"object"!=typeof e){if(e=a(e),!t(e)){var o=document.createElement("script"),d=new XMLHttpRequest;o.dataset.src=e,d.onreadystatechange=function(a){try{if("OK"==a.target.statusText&&4==a.target.readyState){o.innerHTML=a.target.responseText,u.insertBefore(o,u.firstChild),localStorage.wakeloaderQueue||(localStorage.wakeloaderQueue="[]");try{var r=JSON.parse(localStorage.wakeloaderQueue);r.push(e),localStorage.wakeloaderQueue=JSON.stringify(r)}catch(a){var r=[];r.push(e),localStorage.wakeloaderQueue=JSON.stringify(r)}}}catch(a){}},d.open("GET",e,!1),d.send()}}else{e=r("object"==typeof e?[e]:e);for(var l in e)window.require(e[l])}},wakeloader.updateQueue=function(){return wakeloader.update=localStorage.wakeloaderUpdate=Date(),wakeloader.update},wakeloader.queue=r(wakeloader.queue);for(var s in wakeloader.queue)e(wakeloader.queue[s],s==wakeloader.queue.length-1);i.nextSibling?i.parentNode.insertBefore(u,i.nextSibling):i.parentNode.appendChild(u)}}();